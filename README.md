# FlowMotion

FlowMotion is an innovative mobile application that provides users with short, engaging summaries of popular self-improvement content in the form of dynamic, cartoon-like animations generated by AI.

## Features

- AI-generated animated stories based on self-improvement content
- Key points extraction for quick knowledge acquisition
- Background audio playback
- Subscription system with trial period
- Favorites and quotes saving
- Comprehensive analytics dashboard
- Smooth animations and transitions
- Accessible UI components
- Internationalization support
- Performance monitoring

## Tech Stack

- **Frontend**: React Native with TypeScript
- **Backend**: Supabase (PostgreSQL, Auth, Storage, Edge Functions)
- **AI**: GPT-4 for content processing and key points generation
- **Animation**: Stability AI for image generation
- **Payments**: Stripe integration
- **Analytics**: Custom analytics implementation with Supabase
- **Internationalization**: i18next with react-i18next
- **Testing**: Jest, Detox for E2E testing, k6 for load testing

## Non-Functional Requirements

FlowMotion meets the following non-functional requirements:

### Performance

- **App Launch Time**: < 3 seconds on target devices
- **Feed Scroll Performance**: Sustained 60 FPS
- **UI Responsiveness**: All interactions respond within 100ms
- **Video Playback**: Smooth playback with minimal buffering
- **API Response Time**: < 1 second for all API calls

### Scalability

- **Concurrent Users**: Supports 1000+ concurrent users
- **AI Pipeline Throughput**: Processes 100+ stories per hour
- **Database Performance**: Optimized queries with proper indexing
- **Auto-Scaling**: Configured to scale based on load

### Security

- **Authentication**: Secure authentication with proper password requirements
- **Authorization**: Row-Level Security (RLS) policies to prevent unauthorized access
- **Data Validation**: Input validation and sanitization
- **Encryption**: Data encrypted at rest and in transit
- **PCI Compliance**: Stripe integration for secure payments

### Usability

- **User Flows**: Intuitive flows with minimal steps
- **Task Completion**: Common tasks require < 3 taps
- **Error Handling**: Clear error messages with recovery options
- **Onboarding**: Guided onboarding for new users

### Compatibility

- **iOS Support**: iOS 15-17
- **Android Support**: Android 12-14
- **Screen Sizes**: 4"-7" screens
- **Orientation**: Portrait and landscape
- **Accessibility**: Support for screen readers, dynamic text sizes, and reduced motion

### Reliability

- **Crash-Free Rate**: > 99.5%
- **Offline Support**: Cached content available offline
- **Background Audio**: Graceful handling of interruptions

## Getting Started

### Prerequisites

- Node.js (v16 or later)
- npm or yarn
- Expo CLI
- Supabase account
- Stripe account
- OpenAI API key
- Stability AI API key

### Environment Setup

Create a `.env` file in the root directory with the following variables:

\`\`\`
EXPO_PUBLIC_SUPABASE_URL=your_supabase_url
EXPO_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
\`\`\`

For the Supabase Edge Functions, you'll need to set up the following secrets:

\`\`\`
supabase secrets set SUPABASE_SERVICE_KEY=your_supabase_service_key
supabase secrets set STRIPE_SECRET_KEY=your_stripe_secret_key
supabase secrets set STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret
supabase secrets set OPENAI_API_KEY=your_openai_api_key
supabase secrets set STABILITY_API_KEY=your_stability_api_key
\`\`\`

### Installation

1. Clone the repository:
   \`\`\`
   git clone https://github.com/yourusername/flowmotion-app.git
   cd flowmotion-app
   \`\`\`

2. Install dependencies:
   \`\`\`
   npm install
   \`\`\`

3. Set up the Supabase database:
   - Run the schema.sql script to create tables and set up RLS policies
   - Run the seed.sql script to populate the database with initial data

4. Deploy the Supabase Edge Functions:
   \`\`\`
   supabase functions deploy createStripeCustomerAndTrial
   supabase functions deploy createCheckoutSession
   supabase functions deploy handleStripeWebhook
   supabase functions deploy generateStoryScript
   supabase functions deploy generateAnimationAssets
   supabase functions deploy extractKeyPoints
   supabase functions deploy generateAnalyticsReport
   \`\`\`

5. Set up Stripe webhook:
   - Create a webhook in your Stripe dashboard
   - Point it to your Supabase Edge Function URL for handleStripeWebhook
   - Add the webhook secret to your Supabase secrets

### Running the App

Start the development server:

\`\`\`
npx expo start
\`\`\`

## Testing

Run the unit tests:

\`\`\`
npm test
\`\`\`

Run the E2E tests:

\`\`\`
npm run e2e:build
npm run e2e:test
\`\`\`

Run the load tests:

\`\`\`
npm run load-test:stories
npm run load-test:ai-pipeline
\`\`\`

Run the performance tests:

\`\`\`
npm run phase6:performance
\`\`\`

Run the security tests:

\`\`\`
npm run phase6:security
\`\`\`

Run the compatibility tests:

\`\`\`
npm run phase6:compatibility
\`\`\`

Run the usability tests:

\`\`\`
npm run phase6:usability
\`\`\`

Run all Phase 6 tests:

\`\`\`
npm run phase6:all
\`\`\`

Generate a Phase 6 report:

\`\`\`
npm run phase6:report
\`\`\`

Fix Phase 6 issues:

\`\`\`
npm run phase6:fix
\`\`\`

## Deployment

### iOS

\`\`\`
eas build --platform ios
\`\`\`

### Android

\`\`\`
eas build --platform android
\`\`\`

## Accessibility

FlowMotion is designed to be accessible to all users. Key accessibility features include:

- Screen reader support with proper labels and hints
- Support for dynamic text sizes
- Support for reduced motion
- Sufficient color contrast
- Keyboard navigation support
- Focus management

## Internationalization

FlowMotion supports multiple languages through i18next. Currently, English is fully supported, with placeholders for additional languages.

To add a new language:

1. Create a new locale file in `i18n/locales/`
2. Add the language to the `AVAILABLE_LANGUAGES` object in `i18n/index.ts`
3. Import and add the language resources in `i18n/index.ts`

## License

This project is licensed under the MIT License - see the LICENSE file for details.
\`\`\`
